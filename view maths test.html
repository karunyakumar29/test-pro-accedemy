<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Maths Test | Test Pro Academy</title>
<style>
  body, html {
    margin: 0;
    padding: 0;
    font-family: Arial, sans-serif;
    background: #f3f6fb;
  }
  header {
    background: #1c3b57;
    color: white;
    padding: 15px 30px;
    font-size: 1.5rem;
    text-align: center;
  }
  .container {
    display: flex;
    height: calc(100vh - 60px);
  }
  .summary {
    width: 300px;
    background: #fff;
    padding: 20px;
    box-shadow: 0 5px 20px rgba(0,0,0,0.1);
    border-radius: 15px;
    margin: 20px;
    flex-shrink: 0;
  }
  .summary h3 {margin-top:0;color:#1c3b57;font-size:1.2rem;}
  .summary p {margin: 8px 0;font-size:1rem;}
  .question-buttons {display: flex;flex-wrap: wrap;gap:5px;margin-top:10px;max-height:400px;overflow-y:auto;}
  .question-buttons button {width: 40px;height: 40px;border-radius: 50%;border:none;cursor:pointer;background:#ccc;}
  .question-buttons button.active, .question-buttons button.answered {background:#1c3b57;color:white;}
  .question-box {
    flex: 1;
    background: #fff;
    margin: 40px 20px;
    padding: 40px;
    border-radius: 15px;
    box-shadow:0 5px 20px rgba(0,0,0,0.1);
    display: flex;
    flex-direction: column;
    justify-content: space-between;
  }
  .question-number {font-weight:bold;font-size:1.2rem;}
  .question-text {margin: 25px 0;font-size:1.1rem;line-height:1.6;}
  .options button {
    display:block;width:100%;text-align:left;margin:10px 0;padding:14px;border-radius:8px;border:1px solid #ccc;background:#fff;cursor:pointer;transition:0.15s;font-size:1rem;
  }
  .options button:hover {background:#e0e0e0;}
  .options button.selected {
    background:#1c3b57;
    color:#fff;
    border-color:#1c3b57;
  }
  .nav-buttons {display:flex;justify-content:space-between;margin-top:30px;}
  .nav-buttons button, .submit-btn {padding:12px 30px;border:none;background:#1c3b57;color:white;border-radius:6px;cursor:pointer;}
  .nav-buttons button:hover, .submit-btn:hover {background:#16324a;}
  .submit-btn {margin-top:20px;width:100%;}
  @media(max-width:900px){
    .container {flex-direction: column;}
    .summary {width:90%;margin:10px auto;}
    .question-box {margin:10px auto;width:90%;}
  }
</style>
</head>
<body>

<header>Maths Test - 20 Questions</header>

<div class="container">
  <div class="summary">
    <h3>Test Summary</h3>
    <p>Total Questions: <span id="total-questions">20</span></p>
    <p>Completed: <span id="completed-questions">0</span></p>
    <p>Pending: <span id="pending-questions">20</span></p>
    <div class="question-buttons" id="question-buttons"></div>
    <button class="submit-btn" onclick="submitTest()">Submit Test</button>
  </div>

  <div class="question-box">
    <div>
      <div class="question-number" id="question-number">Question 1 of 20</div>
      <div class="question-text" id="question-text">Loading question...</div>
      <div class="options">
        <button onclick="selectOption(0)" id="option0">Option A</button>
        <button onclick="selectOption(1)" id="option1">Option B</button>
        <button onclick="selectOption(2)" id="option2">Option C</button>
        <button onclick="selectOption(3)" id="option3">Option D</button>
      </div>
    </div>
    <div class="nav-buttons">
      <button onclick="prevQuestion()">Previous</button>
      <button onclick="nextQuestion()">Next</button>
    </div>
  </div>
</div>

<script>
const questions = [
  { q: "1. (3, 4) மற்றும் (7, 8) புள்ளிகளை இணைக்கும் கோட்டின் சரிவு என்ன?", options: ["1", "2", "3", "4"], answer: 0 },
  { q: "2. √225 இன் மதிப்பு என்ன?", options: ["10", "14", "15", "25"], answer: 2 },
  { q: "3. ஒரு கோணத்தின் அளவு 90° என்றால், அது எந்த வகை கோணம்?", options: ["முனைகோணம்", "நேர்கோணம்", "பெருங்கோணம்", "முழுக்கோணம்"], answer: 1 },
  { q: "4. 2x + 3 = 7 என்றால், x = ?", options: ["1", "2", "3", "4"], answer: 1 },
  { q: "5. 3² + 4² = ?", options: ["25", "12", "7", "9"], answer: 0 },
  { q: "6. 100 மீட்டர் = ? கிலோமீட்டர்", options: ["1", "0.1", "0.01", "10"], answer: 2 },
  { q: "7. ஒரு வட்டத்தின் சுற்றளவு = 2πr. r = 7 cm என்றால், சுற்றளவு =", options: ["14π", "7π", "21π", "28π"], answer: 0 },
  { q: "8. x² - 9 = 0 என்றால், x = ?", options: ["±3", "3", "-3", "0"], answer: 0 },
  { q: "9. ஒரு மூவகத்தின் கோணங்களின் மொத்தம் =", options: ["90°", "120°", "180°", "360°"], answer: 2 },
  { q: "10. ½ + ¼ =", options: ["¾", "½", "1", "1¼"], answer: 0 },
  { q: "11. 0 இன் கூட்டல் மாறி =", options: ["0", "1", "-1", "∞"], answer: 0 },
  { q: "12. 5x = 25 என்றால், x = ?", options: ["20", "10", "5", "1"], answer: 2 },
  { q: "13. √49 இன் மதிப்பு =", options: ["6", "7", "8", "9"], answer: 1 },
  { q: "14. பை (π) இன் மதிப்பு சுமார் =", options: ["3.12", "3.14", "3.15", "3.41"], answer: 1 },
  { q: "15. 6 + (–9) =", options: ["–3", "3", "15", "–15"], answer: 0 },
  { q: "16. ஒரு சதுரத்தின் பரப்பளவு 64 cm² என்றால், அதன் ஒரு பக்கத்தின் நீளம் =", options: ["6 cm", "8 cm", "9 cm", "10 cm"], answer: 1 },
  { q: "17. 9 × 9 =", options: ["81", "72", "99", "91"], answer: 0 },
  { q: "18. 200 இன் 15% =", options: ["20", "25", "30", "40"], answer: 2 },
  { q: "19. ஒரு நேர்கோண மூவகத்தில் பைதகோரஸ் விதி:", options: ["a² + b² = c²", "a² - b² = c²", "2ab = c", "a + b = c"], answer: 0 },
  { q: "20. 2³ இன் மதிப்பு =", options: ["6", "8", "9", "12"], answer: 1 }
];

let currentQuestion = 0;
let userAnswers = new Array(questions.length).fill(null);

function loadQuestion(index) {
  const q = questions[index];
  document.getElementById("question-number").innerText = `Question ${index + 1} of ${questions.length}`;
  document.getElementById("question-text").innerText = q.q;
  q.options.forEach((opt, i) => {
    const btn = document.getElementById(`option${i}`);
    btn.innerText = opt;
    btn.classList.toggle("selected", userAnswers[index] === i);
  });
  updateSummary();
  updateQuickButtons();
}

function selectOption(i) {
  userAnswers[currentQuestion] = i;
  loadQuestion(currentQuestion);
}

function nextQuestion() {
  if (currentQuestion < questions.length - 1) currentQuestion++;
  loadQuestion(currentQuestion);
}

function prevQuestion() {
  if (currentQuestion > 0) currentQuestion--;
  loadQuestion(currentQuestion);
}

function updateSummary() {
  const completed = userAnswers.filter(a => a !== null).length;
  document.getElementById("completed-questions").innerText = completed;
  document.getElementById("pending-questions").innerText = questions.length - completed;
}

function updateQuickButtons() {
  const container = document.getElementById("question-buttons");
  container.innerHTML = "";
  questions.forEach((_, i) => {
    const btn = document.createElement("button");
    btn.innerText = i + 1;
    if (i === currentQuestion) btn.classList.add("active");
    if (userAnswers[i] !== null) btn.classList.add("answered");
    btn.onclick = () => { currentQuestion = i; loadQuestion(i); };
    container.appendChild(btn);
  });
}

function submitTest() {
  const totalQuestions = questions.length;
  const attemptedQuestions = userAnswers.filter(a => a !== null).length;
  let totalScore = 0;
  for (let i = 0; i < totalQuestions; i++) {
    if (userAnswers[i] === questions[i].answer) totalScore += 2;
  }

  localStorage.setItem("totalQuestions", totalQuestions);
  localStorage.setItem("attemptedQuestions", attemptedQuestions);
  localStorage.setItem("unattemptedQuestions", totalQuestions - attemptedQuestions);
  localStorage.setItem("totalScore", totalScore);

  // ✅ NEW LINE: Save Maths mark for grade page
  localStorage.setItem("mathsMark", totalScore);

  // ✅ Redirect to Maths result page
  window.location.href = "tamil mark.html";
}

window.onload = () => loadQuestion(currentQuestion);
</script>
</body>
</html>
