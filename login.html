<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width,initial-scale=1" />
<title>Login | Test Pro Academy</title>
<style>
* { box-sizing: border-box; font-family: 'Segoe UI', system-ui, sans-serif; }
body {
  margin: 0;
  height: 100vh;
  display: flex;
  align-items: center;
  justify-content: center;
  background: #f3f6fb;
  overflow: hidden;
}
#container {
  width: 850px;
  background: #fff;
  border-radius: 12px;
  overflow: hidden;
  box-shadow: 0 10px 40px rgba(0,0,0,0.15);
  display: flex;
  animation: fadeInUp 1s ease;
}
.logoContainer {
  flex: 1;
  background: linear-gradient(135deg,#1c3b57,#2a527a);
  color: #fff;
  padding: 60px 40px;
  display: flex;
  flex-direction: column;
  align-items: center;
  justify-content: center;
  text-align: center;
  animation: slideLeft 1s ease;
}
.logoContainer img { width: 230px; margin-bottom: 20px; animation: logoBounce 2s infinite ease-in-out; }
.logoContainer h2 { font-size: 26px; margin-bottom: 8px; }
.formContainer { flex: 1; background: #fff; display: flex; align-items: center; justify-content: center; }

form { width: 100%; max-width: 320px; text-align: left; animation: fadeIn 0.7s ease; }
label { font-weight: 700; font-size: 13px; color: #333; display:block; margin-bottom:6px; }
input {
  width:100%; padding:10px; border:1px solid #cbd3df; border-radius:6px;
  background:#f3f6fb; font-size:14px; margin-bottom:14px;
  transition: 0.3s ease;
}
input:focus { outline:none; border-color:#1c3b57; background:#fff; transform: scale(1.03); }
button {
  width:100%; padding:12px 14px; border:none; border-radius:7px;
  background:#1c3b57; color:#fff; font-weight:700; font-size:15px; cursor:pointer;
  transition: 0.3s ease;
}
button:hover { background:#174463; transform: scale(1.05); }

#profileContainer {
  width:120px; height:120px; border-radius:50%;
  border:3px solid transparent;
  background-image: linear-gradient(white, white),
                    linear-gradient(135deg,#f58529,#dd2a7b,#8134af,#515bd4);
  background-origin: border-box;
  background-clip: content-box, border-box;
  display:flex; align-items:center; justify-content:center;
  overflow:hidden; cursor:pointer; margin: 0 auto 20px auto;
  position: relative;
  transition: transform 0.3s ease, box-shadow 0.3s ease;
}
#profileContainer:hover { transform: scale(1.1); box-shadow: 0 0 15px rgba(28,59,87,0.3); }
#profileContainer img { width:100%; height:100%; object-fit:cover; }

@keyframes fadeInUp { from{opacity:0; transform: translateY(50px);} to{opacity:1; transform: translateY(0);} }
@keyframes fadeIn { from{opacity:0;} to{opacity:1;} }
@keyframes slideLeft { from{transform:translateX(-40px);opacity:0;} to{transform:translateX(0);opacity:1;} }
@keyframes logoBounce { 0%,100%{transform:translateY(0);}50%{transform:translateY(-8px);} }
</style>
</head>
<body>

<div id="container">
  <div class="logoContainer">
    <img src="logo.png" alt="Logo">
    <h2>Test Pro Academy</h2>
    <p>Welcome back! Continue your learning journey.</p>
  </div>

  <div class="formContainer">
    <form id="loginForm">
      <h2 style="text-align:center; color:#1c3b57;">Login to Your Account</h2>

      <div id="profileContainer">
        <img id="profilePreview" src="https://cdn-icons-png.flaticon.com/512/847/847969.png" alt="Profile">
      </div>

      <label>Email</label>
      <input type="email" id="loginEmail" placeholder="you@example.com" required>

      <label>Register No</label>
      <input type="text" id="loginPass" placeholder="Register Number" required>

      <button type="button" onclick="login()">Login</button>
    </form>
  </div>
</div>

<script>
// ðŸ”¹ When user types email, auto-update profile pic
document.getElementById('loginEmail').addEventListener('input', function() {
  const email = this.value.trim().toLowerCase();
  const students = JSON.parse(localStorage.getItem('students')) || [];

  // Find the user by email
  const user = students.find(s => s.email.toLowerCase() === email);

  const profilePreview = document.getElementById('profilePreview');
  if (user && user.pic) {
    profilePreview.src = user.pic;
  } else {
    // Default icon if no match
    profilePreview.src = "https://cdn-icons-png.flaticon.com/512/847/847969.png";
  }
});

// ðŸ”¹ Login function
function login() {
  const email = document.getElementById('loginEmail').value.trim().toLowerCase();
  const pass = document.getElementById('loginPass').value.trim();

  if (!email || !pass) {
    alert("Please enter your email and register number.");
    return;
  }

  const students = JSON.parse(localStorage.getItem('students')) || [];
  const user = students.find(s => s.email.toLowerCase() === email && s.password === pass);

  if (!user) {
    alert("Invalid email or register number.");
    return;
  }

  // Save and redirect
  localStorage.setItem('loggedIn', JSON.stringify(user));
  localStorage.setItem('studentData', JSON.stringify(user));
  window.location.href = "student.html";
}
</script>

</body>
</html>

